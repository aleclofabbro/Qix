<!DOCTYPE html>
<html>

<head>
  <title>Test</title>
  <script type="text/javascript" src="../src/promise.js"></script>
  <script type="text/javascript">
  function log(tag) {
    return function() {
      console.log(tag, arguments);
      return arguments;
    }
  }
  p = promise(function(res) {
    res(null, 10, 20);
  });
  p2 = p.
  map(function(err, a, b) {
    return [null, a * 2, b * 2];
  });

  p.map(log('p'))
  p2.map(log('p2'))
  p3 = p.map(log('p3_1')).map(function(e, a, b) {
    return [null, a + b];
  }).map(log('p3_2'))
  p3.map(log('p3'))
  </script>
</head>

<body>
</body>

</html>