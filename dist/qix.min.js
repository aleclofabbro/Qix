(function(){"use strict";function n(n){return"length"in n&&"number"===typeof n.length}function t(t){return n(t)?Array.prototype.slice.call(t):[t]}define("qix",function(){var n="qix-element-placeholder";var r=u.bind(null,"qix");function e(n){var r=document.createElement("div");r.innerHTML=n;return t(r.children)}function u(n,t){return i(t)[0]===n}function i(n){return n.name.split(":")}function o(n,t,r,e){var u=y(n)+":"+y(r);if(e===null)t.removeAttribute(u,e);else{e=e===void 0?"":e;t.setAttribute(u,e)}return e}function c(n,r){var e=y(n);return t(r.attributes).filter(u.bind(null,e)).reduce(function(n,t){var r=_(i(t)[1]);n[r]=t.value;return n},{})}function a(n){var t=i(n)[1];var r=n.value.split("#");return{name:_(t),module_path:r[0],module_prop:r[1]}}function f(n){return t(n.attributes).filter(r).map(a)}function l(n,t){for(var r in t)n[r]=t[r];return n}function d(t,r){if(r.length){var e=r.map(v.bind(null,"name"));t.setAttribute(n,e.join(","))}}function s(n){return n.reduce(function(n,r){var e=f(r);d(r,e);e.forEach(function(t){n[t.name]=t});return l(s(t(r.children)),n)},{})}function v(n,t){return t?t[n]:void 0}function m(n,t){return v(t,n)}function p(n,t,r){var u=e(r.text);var i=s(u);var o=Object.keys(i);var c=o.map(m.bind(null,i)).map(v.bind(null,"module_path"));r.require(c,function(){o.forEach(function(n,t){var e=i[n];var u=r.require(e.module_path);var o=e.module_prop?u[e.module_prop]:u;if(!o)throw new Error("No Factory for ctrl_def:\n"+JSON.stringify(e,null,4));e.factory=o});var t={spawn:b.bind(null,u,i),spawn_into:h.bind(null,u,i)};n(t)},t)}function b(n,t,r){var e=n.map(x);var u=document.createElement("div");e.forEach(u.appendChild.bind(u));return e.reduce(function(n,e){return H(t,r,n,e)},{$root_elems:e})}function h(n,t,r,e){var u=b(n,t,r);u.$root_elems.forEach(e.appendChild.bind(e));return u}function x(n){return n.cloneNode(true)}function _(n){return n.replace(/-/g,"_")}function y(n){return n.replace(/_/g,"-")}function q(){}function w(){}function g(n,t){var r=n.name;var e=Object.create(n);e.get_attrs=c.bind(null,r,t);e.set_attr=o.bind(null,r,t);e.emit=q.bind(null);e.is_my_qix_event=w.bind(null);e.elem=t;return e}function T(n,t,r,e){if(r.parentElement){var u=n.name;if(e[u])throw new Error("QIX#bind_controller: duplicate ctrl name:"+u);var i=g(n,r);e[u]=n.factory(r,t[u],i);e["$"+u]=i;return e}}function E(n,t,r,e){var u=g({name:t,factory:n},r);var i={};i["$"+t]=u;i[t]=n(r,e,u);return i}function A(t,r,e,u){var i=u.getAttribute(n);var o=i.split(",");return o.reduce(function(n,e){return T(t[e],r,u,n)},e)}function M(t){return t.hasAttribute(n)}function O(r){return t(r.querySelectorAll("["+n+"]"))}function X(n){var t=O(n);if(M(n))t.unshift(n);return t}function H(n,t,r,e){return X(e).reduce(A.bind(null,n,t),r)}function j(){}function L(n,t,r){t(["qix-seed!"+n],p.bind(null,r,j))}function P(n,t,r){return p(t,r,n)}return{load:L,make:P,control:E}});define("qix-seed",function(){function n(n,t){if(t.startsWith("."))return n+t;else return t}function r(r,e,u,i){var o=r.substring(0,r.lastIndexOf("/")+1);var c=n.bind(null,o);e(["text!"+r],function(n){var r={text:n,require:function(n){if(Array.prototype.isPrototypeOf(n)){var r=t(arguments);r[0]=r[0].map(c);return require.apply(null,r)}else{var e=c(n);return require(e)}}};u(r)})}return{load:r}});define("text",function(){function n(n,t,e,u){var i=t.toUrl(n);r(i,e)}return{load:n}});function r(n,t){var r=u();if(!r)throw new Error("NO XHR!");r.responseType="text";r.open("GET",n,true);r.onreadystatechange=function(){if(r.readyState!=4)return;if(r.status!=200&&r.status!=304){throw new Error("get_remote_text HTTP error for ["+n+"] : "+r.status)}t(r.responseText)};if(r.readyState==4)return;r.send()}var e=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}];function u(){var n=false;for(var t=0;t<e.length;t++){try{n=e[t]()}catch(r){continue}break}return n}})();(function(){"use strict";function n(n){return n}function t(n){return n===null||n===void 0?"":String(n)}function r(n,t,r){return t[n]=r}function e(n,r,e){return r[n]=t(e)}var u=e.bind(null,"innerHTML");var i=e.bind(null,"innerText");define("qix-elem",function(n,t,r){t.html_setter=u;t.text_setter=i;t.html=o;t.text=c;t.content=e;function e(n,r,e){return function(r){var u=e.get_attrs().as;return t[u+"_setter"](n,r)}}function o(n,t,r){return u.bind(null,n)}function c(n,t,r){return i.bind(null,n)}})})();(function(){"use strict";define("qix-flux",function(n,t,r){t.when=e;function e(n,t,r){var e=document.createComment("qix-flux#when placeholder");var u=n.parentElement;u.insertBefore(e,n);n.remove();return function(t){if(t){u.insertBefore(n,e)}else{}}}})})();
