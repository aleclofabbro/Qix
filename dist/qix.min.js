(function(){"use strict";function n(n){return"length"in n&&"number"===typeof n.length}function t(t){return n(t)?Array.prototype.slice.call(t):[t]}define("qix",function(){var n="qix-element-placeholder";var r=u.bind(null,"qix");function e(n){var r=document.createElement("div");r.innerHTML=n;return t(r.children)}function u(n,t){return i(t)[0]===n}function i(n){return n.name.split(":")}function o(n,t,r,e){var u=h(n)+":"+h(r);if(e===null)t.removeAttribute(u,e);else t.setAttribute(u,e=e===void 0?"":e);return e}function a(n,r){return t(r.attributes).reduce(function(t,r){if(u(h(n),r)){var e=_(i(r)[1]);t[e]=r.value}return t},{})}function c(n){var t=i(n)[1];var r=n.value.split("#");return{name:_(t),module_path:r[0],module_prop:r[1]}}function f(n){return t(n.attributes).filter(r).map(c)}function l(n,t){for(var r in t)n[r]=t[r];return n}function s(t,r){var e=r.map(d.bind(null,"name"));t.setAttribute(n,e.join(","))}function v(n){return n.reduce(function(n,r){var e=f(r);if(e.length){s(r,e);e.forEach(function(t){n[t.name]=t})}return l(v(t(r.children)),n)},{})}function d(n,t){return t?t[n]:void 0}function p(n,t){return d(t,n)}function m(n,t,r){var u=e(r.text);var i=v(u);var o=Object.keys(i);var a=o.map(p.bind(null,i)).map(d.bind(null,"module_path"));r.require(a,function(){o.forEach(function(n,t){var e=i[n];var u=r.require(e.module_path);var o=e.module_prop?u[e.module_prop]:u;if(!o)throw new Error("No Factory for ctrl_def"+JSON.stringify(e,null,4));e.factory=o});var t=Object.create(T);t._all_ctrl_defs=i;t._master_elem_array=u;n(t)},t)}function b(n){return n.cloneNode(true)}function _(n){return n.replace(/-/g,"_")}function h(n){return n.replace(/_/g,"-")}function y(n,t,r){var e=Object.create(n);e.get_attrs=a.bind(null,t,r);e.set_attr=o.bind(null,t,r);e.elem=r;return e}function x(n,t,r,e,u){var i=y(n,u,r);e[u]=n.factory(r,t[u],i);e["$"+u]=i}function g(t,r,e,u){var i=u.getAttribute(n);var o=i.split(",");o.forEach(function(n){x(t[n],r,u,e)})}function q(t){return t.hasAttribute(n)}function w(r){return t(r.querySelectorAll("["+n+"]"))}function A(n){var t=w(n);if(q(n))t.unshift(n);return t}function O(n,t,r,e){A(e).forEach(g.bind(null,n._all_ctrl_defs,t,r));return r}var T={spawn:function(n){var t=this;var r=t._master_elem_array.map(b);return r.reduce(O.bind(null,t,n),{$root_elems:r})},spawn_into:function(n,t){var r=this.spawn(n);r.$root_elems.forEach(t.appendChild.bind(t));return r}};var E=function(){};return{load:function(n,t,r){t(["qix-seed!"+n],m.bind(null,r,E))},make:function(n,t,r){return m(t,r,n)}}});define("qix-seed",function(){function n(n,t){if(t.startsWith("."))return n+t;else return t}function r(r,e,u,i){var o=r.substring(0,r.lastIndexOf("/")+1);var a=n.bind(null,o);e(["text!"+r],function(n){var r={text:n,require:function(n){if(Array.prototype.isPrototypeOf(n)){var r=t(arguments);r[0]=r[0].map(a);return require.apply(null,r)}else{var e=a(n);return require(e)}}};u(r)})}return{load:r}});define("text",function(){function n(n,t,e,u){var i=t.toUrl(n);r(i,e)}return{load:n}});function r(n,t){var r=u();if(!r)throw new Error("NO XHR!");r.responseType="text";r.open("GET",n,true);r.onreadystatechange=function(){if(r.readyState!=4)return;if(r.status!=200&&r.status!=304){return}t(r.responseText)};if(r.readyState==4)return;r.send()}var e=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}];function u(){var n=false;for(var t=0;t<e.length;t++){try{n=e[t]()}catch(r){continue}break}return n}})();
//# sourceMappingURL=qix.js.map
