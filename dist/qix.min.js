(function(){"use strict";var e=a.bind(null,"qix");function n(){}function t(e){return e()}function r(e){return e.replace(/-/g,"_")}function u(e){return e.replace(/_/g,"-")}function i(e){return"length"in e&&"number"===typeof e.length}function o(e){return i(e)?Array.prototype.slice.call(e):[e]}function a(e,n){return c(n)[0]===e}function c(e){return e.name.split(":")}function f(e){var n=document.createElement("template");n.innerHTML=e;return n}function l(e){var n=c(e)[1];var t=e.value.split("#");return{name:r(n),module_path:t[0],module_prop:t[1]}}function d(n){return o(n.attributes).filter(e).map(l).map(function(e){e.master_element=master_elem;return e})}function s(e,n){n=n||[];return o(e.childNodes).reduce(function(e,n){var t;if(n.nodeType===Node.ELEMENT_NODE){t=d(n);e=e.concat(t);s(n,e);attach_qix_to_elem(n,t)}if(t.length)n.$qix={ctrl_defs:t};return e},n)}function p(e,n){var t=f(n.text),r=s(t),u=r.map(function(e){return e.module_path});var i={seed:n,spawn:v.bind(null,t)};n.require(u,function(){r.forEach(function(e){var t=n.require(e.module_path);var r=e.module_prop?_module[e.module_prop]:_module;if(!r)throw new Error("No Factory for ctrl_def:\n"+JSON.stringify(e,null,4));e.factory=r});e(i)})}function v(e,n,t,r,u){r=r||"append";var i=m(e,n),a=o(i.component.childNodes);if(r==="append"||r==="after"&&!u.nextSibling){a.forEach(t.appendChild.bind(t))}else{var c=u;if(r==="prepend")c=t.firstChild;else if(r==="after")c=u.nextSibling;a.forEach(function(e){t.insertBefore(e,c)})}return i.binders.reduce(function(e,n){n(elem,ctrl_init,e);return e},{})}function m(e,n){var t=document.createElement("template"),r=_(e,t,n);return{component:t,binders:r.reverse()}}function _(e,n,t){var r=[];for(var u=0;u<e.childNodes.length;u++){var i=e.childNodes[u];var o=y(n,i,t);r=r.concat(o)}return r}function h(e){document.createComment("qix placeholder for: "+JSON.stringify(e.name))}function x(e,n,t){var r=b(_curr_ctrl_def,e),u=_curr_binder(e,n,control_link);t[_curr_ctrl_def.name]=u;return u}function b(e,n){var t=e.name;var r=Object.create(e);r.get_attrs=q.bind(null,t,n);r.set_attr=g.bind(null,t,n);r.elem=n;return r}function g(e,n,t,r){var i=u(e)+":"+u(t);if(r===null)n.removeAttribute(i,r);else{r=r===void 0?"":r;n.setAttribute(i,r)}return r}function q(e,n){var t=u(e);return o(n.attributes).filter(a.bind(null,t)).reduce(function(e,n){var t=r(c(n)[1]);e[t]=n.value;return e},{})}function y(e,n,t){var r,u=[];if(n.$qix){var i=n.$qix.ctrl_defs;for(var o=0;o<i.length;o++){var a=i[o],c=a.factory(n,t,function d(){r=h(a);return r});if(c){var f=x.bind(null,r,t);u.push(f)}if(r){if(o>0)console.warn("WARNING: Qix#capture_node Captured :",a,"at index",o,"all:",i);break}}}if(!r)r=E(n);e.appendChild(r);if(r.nodeType===Node.ELEMENT_NODE){var l=_(n,r,t);u=u.concat(l)}return u}function E(e,n){return e.cloneNode(n)}function T(e,n,t){n(["qix-seed!"+e],p.bind(null,t))}var N={load:T};define("qix",N);define("qix-seed",function(){function e(e,n){if(n.startsWith("."))return e+n;else return n}function n(n,t,r,u){var i=n.substring(0,n.lastIndexOf("/")+1);var a=e.bind(null,i);t(["text!"+n],function(e){var n={text:e,require:function(e){if(Array.prototype.isPrototypeOf(e)){var n=o(arguments);n[0]=n[0].map(a);return require.apply(null,n)}else{var t=a(e);return require(t)}}};r(n)})}return{load:n}});define("text",function(){function e(e,n,t,r){var u=n.toUrl(e);w(u,t)}return{load:e}});function w(e,n){var t=O();if(!t)throw new Error("NO XHR!");t.responseType="text";t.open("GET",e,true);t.onreadystatechange=function(){if(t.readyState!=4)return;if(t.status!=200&&t.status!=304){throw new Error("get_remote_text HTTP error for ["+e+"] : "+t.status)}n(t.responseText)};if(t.readyState==4)return;t.send()}var M=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}];function O(){var e=false;for(var n=0;n<M.length;n++){try{e=M[n]()}catch(t){continue}break}return e}})();(function(){"use strict";function e(e){return e}function n(e){return e===null||e===void 0?"":String(e)}function t(e,n,t){return n[e]=t}function r(e,t,r){return t[e]=n(r)}var u=r.bind(null,"innerHTML");var i=r.bind(null,"innerText");define("qix-elem",function(e,n,t){n.html_setter=u;n.text_setter=i;n.html=o;n.text=a;n.content=r;function r(e,t,r){return function(t){var u=r.get_attrs().as;return n[u+"_setter"](e,t)}}function o(e,n,t){return u.bind(null,e)}function a(e,n,t){return i.bind(null,e)}})})();(function(){"use strict";define("qix-flux",function(e,n,t){n.when=r;r.$qix={spawn:true};function r(e,n,t){var r=document.createComment("qix-flux#when("+t.name+") placeholder"),u=true,i=e,o=e.parentElement;o.insertBefore(r,i);a(false);function a(e,a){if(!e===!u)return u;if(arguments.length===1)a=n;if(e){u=t.spawn(a,o,"after",r);i=u.$root_elems[0]}else{i.remove();i=null;u=null}return u}return a}})})();
