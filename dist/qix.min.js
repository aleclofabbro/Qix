(function(){"use strict";function r(r){return"length"in r&&"number"===typeof r.length}function n(n){return r(n)?Array.prototype.slice.call(n):[n]}define("qix",function(){var r="qix-element-placeholder";var t=u.bind(null,"qix");function e(r){var t=document.createElement("div");t.innerHTML=r;return n(t.children)}function u(r,n){return i(n)[0]===r}function i(r){return r.name.split(":")}function o(r,n,t,e){var u=h(r)+":"+h(t);if(e===null)n.removeAttribute(u,e);else{e=e===void 0?"":e;n.setAttribute(u,e)}return e}function a(r,t){var e=h(r);return n(t.attributes).filter(function(r){return u(e,r)}).reduce(function(r,n){var t=_(i(n)[1]);r[t]=n.value;return r},{})}function c(r){var n=i(r)[1];var t=r.value.split("#");return{name:_(n),module_path:t[0],module_prop:t[1]}}function f(r){return n(r.attributes).filter(t).map(c)}function l(r,n){for(var t in n)r[t]=n[t];return r}function s(n,t){if(t.length){var e=t.map(d.bind(null,"name"));n.setAttribute(r,e.join(","))}}function v(r){return r.reduce(function(r,t){var e=f(t);s(t,e);e.forEach(function(n){r[n.name]=n});return l(v(n(t.children)),r)},{})}function d(r,n){return n?n[r]:void 0}function p(r,n){return d(n,r)}function m(r,n,t){var u=e(t.text);var i=v(u);var o=Object.keys(i);var a=o.map(p.bind(null,i)).map(d.bind(null,"module_path"));t.require(a,function(){o.forEach(function(r,n){var e=i[r];var u=t.require(e.module_path);var o=e.module_prop?u[e.module_prop]:u;if(!o)throw new Error("No Factory for ctrl_def"+JSON.stringify(e,null,4));e.factory=o});var n=Object.create(T);n._all_ctrl_defs=i;n._master_elem_array=u;r(n)},n)}function b(r){return r.cloneNode(true)}function _(r){return r.replace(/-/g,"_")}function h(r){return r.replace(/_/g,"-")}function y(r,n){var t=r.name;var e=Object.create(r);e.get_attrs=a.bind(null,t,n);e.set_attr=o.bind(null,t,n);e.elem=n;return e}function x(r,n,t,e){var u=r.name;if(e[u])throw new Error("QIX#bind_controller: duplicate ctrl name:"+u);var i=y(r,t);e[u]=r.factory(t,n[u],i);e["$"+u]=i}function w(r,n,t,e){var u=y({name:n,factory:r},t);var i={};i["$"+n]=u;i[n]=r(t,e,u);return i}function g(n,t,e,u){var i=u.getAttribute(r);var o=i.split(",");o.forEach(function(r){x(n[r],t,u,e)})}function q(n){return n.hasAttribute(r)}function A(t){return n(t.querySelectorAll("["+r+"]"))}function E(r){var n=A(r);if(q(r))n.unshift(r);return n}function O(r,n,t,e){E(e).forEach(g.bind(null,r,n,t));return t}var T={spawn:function(r){var n=this;var t=n._master_elem_array.map(b);return t.reduce(function(t,e){return O(n._all_ctrl_defs,r,t,e)},{$root_elems:t})},spawn_into:function(r,n){var t=this.spawn(r);t.$root_elems.forEach(n.appendChild.bind(n));return t}};function X(){}return{load:function(r,n,t){n(["qix-seed!"+r],m.bind(null,t,X))},make:function(r,n,t){return m(n,t,r)},control:w}});define("qix-seed",function(){function r(r,n){if(n.startsWith("."))return r+n;else return n}function t(t,e,u,i){var o=t.substring(0,t.lastIndexOf("/")+1);var a=r.bind(null,o);e(["text!"+t],function(r){var t={text:r,require:function(r){if(Array.prototype.isPrototypeOf(r)){var t=n(arguments);t[0]=t[0].map(a);return require.apply(null,t)}else{var e=a(r);return require(e)}}};u(t)})}return{load:t}});define("text",function(){function r(r,n,e,u){var i=n.toUrl(r);t(i,e)}return{load:r}});function t(r,n){var t=u();if(!t)throw new Error("NO XHR!");t.responseType="text";t.open("GET",r,true);t.onreadystatechange=function(){if(t.readyState!=4)return;if(t.status!=200&&t.status!=304){return}n(t.responseText)};if(t.readyState==4)return;t.send()}var e=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}];function u(){var r=false;for(var n=0;n<e.length;n++){try{r=e[n]()}catch(t){continue}break}return r}})();
//# sourceMappingURL=qix.min.js.map
