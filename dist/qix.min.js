!function(){"use strict";function a(a,b){var c=a(b.module);return b.module_prop?c[b.module_prop]:c}function b(a){var b=a.trim().split(":"),c=b[0],d=b[1].split("#"),e=d[0],f=d[1];return{module:e,module_prop:f,name:c}}function c(a){return x("qix-ctl",a).split("|").map(b)}function d(a,b){var d=g(I(a.master).map(c)).map(h.bind(null,"module"));a.require(d,b.bind(null,a))}function e(a,b,c,d){return function(e,g){k(a.attributes).filter(function(a){return a.name.startsWith(c+":")}).map(function(a){var c=a.name.split(":"),h=f(a.value,c[1],d);h(b,e,g)})}}function f(a,b,c){var d="!"===a[0];a=d?a.substring(1):a;var e=a.split(">"),f=e[0],g=(e[1]||"").trim(),h=(d?"debugger;":"")+"return ["+f+"];";return function(a,d,e){var f="-"===b?a:a[b],i=Function.apply(null,d.concat(h)),j=i.apply(null,e),k=f.apply(null,j);g&&(c[g]=k)}}function g(a){return a.reduce(function(a,b){return a.concat(b)},[])}function h(a,b){return b?b[a]:void 0}function i(a){return"length"in a&&"number"==typeof a.length}function j(a){return void 0===a}function k(a,b){return!b&&j(a)?[]:i(a)?Array.prototype.slice.call(a):[a]}function l(a,b){return b.cloneNode(a)}function m(a,b){return a.querySelector(b)}function n(a,b){return k(a.querySelectorAll(b))}function o(a,b){return m(b,a)}function p(a,b){return o("["+a+"]",b)}function q(a,b){return n(b,a)}function r(a,b){var c=b.getAttribute(a);return b.removeAttribute(a),c}function s(a,b,c){return t(b,c,a)}function t(a,b,c){return k(c.childNodes).map(v.bind(null,a,b))}function u(a,b){return w(b,a,"before"),y(a),b}function v(a,b,c){if(b=b||"append","append"===b||"after"===b&&!a.nextSibling)a.appendChild(c);else{var d=a.parentNode;"prepend"===b?a=d.firstChild:"after"===b&&(a=a.nextSibling),d.insertBefore(c,a)}return c}function w(a,b,c){return v(b,c,a)}function x(a,b){return b.getAttribute(a)}function y(a){return k(a).map(function(a){return a.remove(),a})}function z(){}function A(a,b,c){var d="qix-"+a,e=3===arguments.length?c:500;J.push({name:a,hooker:b,priority:e,hook_one:function(c,e){var f=p(d,c);if(!f)return null;var g=r(d,f),h=document.createComment("qix-hooker:"+a);u(f,h);var i=document.createElement("div");i.appendChild(f);var j=D(i,e);return{factory:b.bind(null,h,j),scope_name:g,elem:f,placeholder:h}}}),J.sort(function(a,b){return a.priority<b.priority})}function B(a,b,c){function d(d){var e="object"==typeof d?d:c;g=b.spawn(e,a,"before")}function e(){h=!0,a.removeEventListener("destroy",e),g.$destroy(),g=null}function f(a){return h?void 0:(a&&!g?d(a):!a&&g&&(g.$destroy(),g=null),g)}var g=null,h=!1;return a.addEventListener("destroy",e),f}function C(a,b,c){function d(){e(),i=!0,g.map(h.bind(null,"$content")).forEach(y),g=[],a.removeEventListener("destroy",d)}function e(){g.forEach(function(a){a.$destroy()})}function f(d){return e(),g=d.map(function(d,e){var f="object"==typeof d?d:c,g=Object.create(f);return g.$index=e,b.spawn(g,a,"before")})}var g=[],i=!1;return a.addEventListener("destroy",d),f}function D(a,b,c){var e={master:a,require:b};return e.spawn=E.bind(null,e),d(e,c||z),e}function E(a,b,c,d){var e=l(!0,a.master),f=H(e,a.require,b);return s(e,c,d),f.inject(),f.inject=z,f.component}function F(a,b,c){a.$controlled_nodes.forEach(function(a){var d=new CustomEvent(b,{detail:c,bubbles:!1});a.dispatchEvent(d)})}function G(a){a.$message("destroy"),y(a.$content),a.$content=[],a.$controlled_nodes=[]}function H(b,d,f){var g={$controlled_nodes:[]},h=[];J.forEach(function(a){for(var c;null!==(c=a.hook_one(b,d));){var i=g[c.scope_name]=c.factory(f);h=h.concat(e(c.elem,i,c.scope_name,g)),g.$controlled_nodes.unshift(c.placeholder)}}),g.$message=F.bind(null,g),g.$destroy=G.bind(null,g),g.$content=k(b.childNodes),I(b).map(function(b){c(b).forEach(function(c){var f=a(d,c),i=g[c.name]=f(b);g["$"+c.name]=b,h=h.concat(e(b,i,c.name,g)),g.$controlled_nodes.unshift(b)})});var i=[],j=[];for(var l in f)i.push(l),j.push(f[l]);return i.push("$"),j.push(g),{component:g,inject:function(){h.forEach(function(a){a(i,j)})}}}var I=q.bind(null,"[qix-ctl]"),J=[];A("if",B,1e3),A("map",C,900),define("qix",function(){var a={load:function(a,b,c){b(["qix-seed!"+a],c)}};return a}),define("qix-defhook",function(){function a(a,b,c){var d=a.split(":"),e=d[0],f=d[1].split("#"),g=f[0],h=Number(f[1]);b([e],function(a){A(g,a,h),c(a)})}return{load:a}}),define("qix-seed",function(){function a(a){var b=document.createElement("div");return b.innerHTML=a,b}function b(a,b){return b.startsWith(".")?a+b:b}function c(c,d,e){var f=c.substring(0,c.lastIndexOf("/")+1),g=b.bind(null,f);d(["qix-text!"+c],function(b){var c=a(b),d=function(a,b,c){if(Array.prototype.isPrototypeOf(a))return a=a.map(g),require(a,b,c);var d=g(a);return require(d)};D(c,d,e)})}return{load:c}}),define("qix-text",function(){function a(a,b,c){var d=b.toUrl(a);K(d,c)}return{load:a}});var K=function(){function a(a,c){var d=b();if(!d)throw new Error("NO XHR!");d.responseType="text",d.open("GET",a,!0),d.onreadystatechange=function(){if(4==d.readyState){if(200!=d.status&&304!=d.status)throw new Error("get_remote_text HTTP error for ["+a+"] : "+d.status);c(d.responseText)}},4!=d.readyState&&d.send()}function b(){for(var a=!1,b=0;b<c.length;b++){try{a=c[b]()}catch(d){continue}break}return a}var c=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}];return a}()}();