!function(){"use strict";function a(a){return a.reduce(function(a,b){return a.concat(b)},[])}function b(a,b){return b?b[a]:void 0}function c(a){return"length"in a&&"number"==typeof a.length}function d(a){return void 0===a}function e(a,b){return!b&&d(a)?[]:c(a)?Array.prototype.slice.call(a):[a]}function f(a,b){return b.cloneNode(a)}function g(a,b){return a.querySelector(b)}function h(a,b){return e(a.querySelectorAll(b))}function i(a,b){return g(b,a)}function j(a,b){return i("["+a+"]",b)}function k(a,b){return h(b,a)}function l(a,b){var c=b.getAttribute(a);return b.removeAttribute(a),c}function m(a,b,c){return n(b,c,a)}function n(a,b,c){return e(c.childNodes).map(p.bind(null,a,b))}function o(a,b){return q(b,a,"before"),s(a),b}function p(a,b,c){if(b=b||"append","append"===b||"after"===b&&!a.nextSibling)a.appendChild(c);else{var d=a.parentNode;"prepend"===b?a=d.firstChild:"after"===b&&(a=a.nextSibling),d.insertBefore(c,a)}return c}function q(a,b,c){return p(b,c,a)}function r(a,b){return b.getAttribute(a)}function s(a){return e(a).map(function(a){return a.remove(),a})}function t(){}function u(a,b,c){var d="qix-"+a;require([b],function(e){G.push({hooker_path:b,name:a,hooker:e,priority:Number(c||500),hook_one:function(b,c){var f=j(d,b);if(!f)return null;var g=l(d,f),h=document.createComment("qix-hooker:"+a);o(f,h);var i=document.createElement("div");i.appendChild(f);var k=C(i,c);return{factory:e.bind(null,h,k),scope_name:g,elem:f,placeholder:h}}}),G.sort(function(a,b){return a.priority<b.priority})})}function v(){return G.map(b.bind(null,"hooker_path"))}function w(a,b){var c=a(b.module);return b.module_prop?c[b.module_prop]:c}function x(a){var b=a.trim().split(":"),c=b[0],d=b[1].split("#"),e=d[0],f=d[1];return{module:e,module_prop:f,name:c}}function y(a){return r("qix-ctl",a).split("|").map(x)}function z(c,d){var e=a(H(c.master).map(y)).map(b.bind(null,"module"));c.require(e.concat(v()),d.bind(null,c))}function A(a,b,c,d){return function(f,g){e(a.attributes).filter(function(a){return a.name.startsWith(c+":")}).map(function(a){var c=a.name.split(":"),e=B(a.value,c[1],d);e(b,f,g)})}}function B(a,b,c){var d="!"===a[0];a=d?a.substring(1):a;var e=a.split(">"),f=e[0],g=(e[1]||"").trim(),h=(d?"debugger;":"")+"return ["+f+"];";return function(a,d,e){var f="-"===b?a:a[b],i=Function.apply(null,d.concat(h)),j=i.apply(null,e),k=f.apply(null,j);g&&(c[g]=k)}}function C(a,b,c){var d={master:a,require:b};return d.spawn=D.bind(null,d),z(d,c||t),d}function D(a,b,c,d){var e=f(!0,a.master),g=F(e,a.require,b);return m(e,c,d),g.inject(),g.component}function E(a,b,c){a.$controlled_nodes.forEach(function(a){var d=new CustomEvent(b,{detail:c,bubbles:!1});a.dispatchEvent(d)})}function F(a,b,c){var d={$controlled_nodes:[]},f=[];G.forEach(function(e){for(var g;null!==(g=e.hook_one(a,b));){var h=d[g.scope_name]=g.factory(c);f=f.concat(A(g.elem,h,g.scope_name,d)),d.$controlled_nodes.unshift(g.placeholder)}}),d.$content=e(a.childNodes),d.$message=E.bind(null,d),H(a).map(function(a){y(a).forEach(function(c){var e=w(b,c),g=d[c.name]=e(a);d["$"+c.name]=a,f=f.concat(A(a,g,c.name,d)),d.$controlled_nodes.unshift(a)})});var g=Object.keys(c),h=g.map(function(a){return c[a]});return g.push("$"),h.push(d),{component:d,inject:function(){f.forEach(function(a){a(g,h)})}}}define("qix-hook-if",function(){return function(a,b,c){function d(){console.log("DESTROY IF");var a=g.$content.slice();g.$message("unbind","destroy"),s(a)}function e(b){g.$message("unbind",b),g=null,a.removeEventListener("unbind",e)}function f(e,f){return e?(g||(g=b.spawn(f||c,a,"before")),g):void(g&&(d(),g=null))}var g=null;return a.addEventListener("unbind",e),f}});var G=[];u("if","qix-hook-if",1e3);var H=k.bind(null,"[qix-ctl]");define("qix-defhook",function(){function a(a,b,c){var d=a.split(":"),e=d[0],f=d[1].split("#"),g=f[0],h=f[1];b([e],function(a){u(g,a,h),c(a)})}return{load:a}}),define("qix-seed",function(){function a(a){var b=document.createElement("div");return b.innerHTML=a,b}function b(a,b){return b.startsWith(".")?a+b:b}function c(c,d,e){var f=c.substring(0,c.lastIndexOf("/")+1),g=b.bind(null,f);d(["qix-text!"+c],function(b){var c=a(b),d=function(a,b,c){if(Array.prototype.isPrototypeOf(a))return a=a.map(g),require(a,b,c);var d=g(a);return require(d)};C(c,d,e)})}return{load:c}}),define("qix-text",function(){function a(a,b,c){var d=b.toUrl(a);I(d,c)}return{load:a}});var I=function(){function a(a,c){var d=b();if(!d)throw new Error("NO XHR!");d.responseType="text",d.open("GET",a,!0),d.onreadystatechange=function(){if(4==d.readyState){if(200!=d.status&&304!=d.status)throw new Error("get_remote_text HTTP error for ["+a+"] : "+d.status);c(d.responseText)}},4!=d.readyState&&d.send()}function b(){for(var a=!1,b=0;b<c.length;b++){try{a=c[b]()}catch(d){continue}break}return a}var c=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}];return a}();define("qix",function(){var a={load:function(a,b,c){b(["qix-seed!"+a],c)}};return a})}();