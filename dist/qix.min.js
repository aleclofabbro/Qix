!function(){"use strict";function a(a){return a.reduce(function(a,b){return a.concat(b)},[])}function b(a,b){return b?b[a]:void 0}function c(a){return"length"in a&&"number"==typeof a.length}function d(a){return void 0===a}function e(a,b){return!b&&d(a)?[]:c(a)?Array.prototype.slice.call(a):[a]}function f(a,b){return b.cloneNode(a)}function g(a,b){return a.querySelector(b)}function h(a,b){return e(a.querySelectorAll(b))}function i(a,b){return g(b,a)}function j(a,b){return i("["+a+"]",b)}function k(a,b){return h(b,a)}function l(a,b){var c=b.getAttribute(a);return b.removeAttribute(a),c}function m(a,b,c){return n(b,c,a)}function n(a,b,c){return e(c.childNodes).map(p.bind(null,a,b))}function o(a,b){return q(b,a,"before"),a.remove(),b}function p(a,b,c){if(b=b||"append","append"===b||"after"===b&&!a.nextSibling)a.appendChild(c);else{var d=a.parentNode;"prepend"===b?a=d.firstChild:"after"===b&&(a=a.nextSibling),d.insertBefore(c,a)}return c}function q(a,b,c){return p(b,c,a)}function r(a,b){return b.getAttribute(a)}function s(a){return e(a).map(function(a){return a.remove(),a})}function t(){}function u(a,b,c){var d="qix-"+a;require([b],function(b){C.push({name:a,hooker:b,priority:Number(c||500),hook_one:function(c,e){var f=j(d,c);if(!f)return null;var g=l(d,f),h=document.createComment("qix-hooker:"+a);o(f,h);var i=document.createElement("div");i.appendChild(f);var k=z(i,e);return{factory:b.bind(null,h,k),scope_name:g}}}),C.sort(function(a,b){return a.priority<b.priority})})}function v(a,b){var c=a(b.module);return b.module_prop?c[b.module_prop]:c}function w(a){var b=a.trim().split(":"),c=b[0],d=b[1].split("#"),e=d[0],f=d[1];return{module:e,module_prop:f,name:c}}function x(a){return r("qix-ctl",a).split("|").map(w)}function y(c,d){var e=a(D(c.master).map(x)).map(b.bind(null,"module"));c.require(e,(d||t).bind(null,c))}function z(a,b,c){var d={master:a,require:b};return d.spawn=A.bind(null,d),y(d,c),d}function A(a,b,c,d){var e=f(!0,a.master),g=B(e,a.require,b);return m(e,c,d),g}function B(a,b,c){var d={$message:t};return C.forEach(function(e){for(var f;null!==(f=e.hook_one(a,b));)d[f.scope_name]=f.factory(c)}),d.$content=e(a.children),D(a).map(function(a){x(a).forEach(function(c){var e=v(b,c);d[c.name]=e(a),d["$"+c.name]=a})}),d}define("qix-hook-if",function(){return function(a,b,c){var d=null;return function(e,f){return e?(d||(d=b.spawn(f||c,a,"before")),d):void(d&&(d.$message("unbind"),s(d.$content),d=null))}}});var C=[];u("if","qix-hook-if",1e3);var D=k.bind(null,"[qix-ctl]");define("qix-defhook",function(){function a(a,b,c,d){var e=a.split(":"),f=e[0],g=e[1].split("#"),h=g[0],i=g[1];b([f],function(a){u(h,a,i),c(a)})}return{load:a}}),define("qix-seed",function(){function a(a){var b=document.createElement("div");return b.innerHTML=a,b}function b(a,b){return b.startsWith(".")?a+b:b}function c(c,d,e,f){var g=c.substring(0,c.lastIndexOf("/")+1),h=b.bind(null,g);d(["qix-text!"+c],function(b){var c=a(b),d=function(a,b,c){if(Array.prototype.isPrototypeOf(a))return a=a.map(h),require(a,b,c);var d=h(a);return require(d)};z(c,d,e)})}return{load:c}}),define("qix-text",function(){function a(a,b,c,d){var e=b.toUrl(a);E(e,c)}return{load:a}});var E=function(){function a(a,c){var d=b();if(!d)throw new Error("NO XHR!");d.responseType="text",d.open("GET",a,!0),d.onreadystatechange=function(){if(4==d.readyState){if(200!=d.status&&304!=d.status)throw new Error("get_remote_text HTTP error for ["+a+"] : "+d.status);c(d.responseText)}},4!=d.readyState&&d.send()}function b(){for(var a=!1,b=0;b<c.length;b++){try{a=c[b]()}catch(d){continue}break}return a}var c=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}];return a}();define("qix",function(){var a={load:function(a,b,c){b(["qix-seed!"+a],c)}};return a})}();