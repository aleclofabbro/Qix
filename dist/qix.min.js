!function(){"use strict";function a(a){return S.push(a)-1}function b(a){return q(T(a.master).map(i.bind(null,a)))}function c(a,b,c){var d;return function(e){return d||(d=a.require(b),d=c?d[c]:d),d(e)}}function d(a,b,d){var f=d.trim().split(":"),g=f[0],h=f[1].split("#"),i=h[0],j=h[1],k=o(b,g),l={module:i,module_prop:j,scope_name:g,injectors:k,control:c(a,i,j)};return e(b,l),l}function e(b,c){var d=a(c);h(b,d)}function f(a){var b=H("qix-ctrls-binders",a);return b?b.split("|"):[]}function g(a){return f(a).map(s.bind(null,S))}function h(a,b){var c=f(a).concat(b);I("qix-ctrls-binders",c.join("|"),a)}function i(a,b){return H("qix-ctl",b).split("|").map(d.bind(null,a,b))}function j(a){return U.push(a)-1}function k(a){var b=q(W.map(function(b){var c=b.attr_name;return q(A(c,a.master).map(function(a){var d=H(c,a).split(":")[1];return b.get_deps(d)}))}));return W.forEach(function(c){for(var d=c.attr_name,e=null;e=z(d,a.master);){var f=document.createElement("i");E(e,f);var g=document.createElement("div"),h=w(!0,e);g.appendChild(h),B(d,h);var i=m(g,a.require);b=b.concat(i.deps);var k=H(d,e).split(":"),l=k[0],n=k[1],p=o(e,l),q=j({hook:c.hooker.bind(null,i,n),scope_name:l,hooker_def:c,injectors:p});I("qix-hooked",q,f)}}),b}function l(a){var b=H("qix-hooked",a);return U[b]}function m(a,b,c){var d={master:a,require:b};return d.spawn=O.bind(null,d),n(d,function(){(c||K)(d)}),d}function n(a,c){var d=k(a),e=b(a),f=e.map(r.bind(null,"module"));a.deps=f.concat(d),a.require(a.deps,c)}function o(a,b){return v(a.attributes).filter(function(a){return a.name.startsWith(b+":")}).map(function(a){var b=a.name.split(":"),c=p(a.value,b[1]);return c})}function p(a,b){var c="!"===a[0];a=c?a.substring(1):a;var d=a.split(">"),e=d[0],f=(d[1]||"").trim(),g=(c?"debugger;":"")+"return ["+e+"];",h=Function.apply(null,["$","_"].concat(g));return function(a,c,d){var e="-"===b?a:a[b],g=h(c,d,a),i=e.apply(null,g);f&&(d[f]=i)}}function q(a){return a.reduce(function(a,b){return a.concat(b)},[])}function r(a,b){return b?b[a]:void 0}function s(a,b){return a?a[b]:void 0}function t(a){return"length"in a&&"number"==typeof a.length}function u(a){return void 0===a}function v(a,b){return!b&&u(a)?[]:t(a)?Array.prototype.slice.call(a):[a]}function w(a,b){return b.cloneNode(a)}function x(a,b){return b.querySelector(a)}function y(a,b){return v(b.querySelectorAll(a))}function z(a,b){return x("["+a+"]",b)}function A(a,b){return y("["+a+"]",b)}function B(a,b){var c=b.getAttribute(a);return b.removeAttribute(a),c}function C(a,b,c){return D(b,c,a)}function D(a,b,c){return v(c.childNodes).map(F.bind(null,a,b))}function E(a,b){return G(b,a,"before"),J(a),b}function F(a,b,c){if(b=b||"append","append"===b||"after"===b&&!a.nextSibling)a.appendChild(c);else{var d=a.parentNode;"prepend"===b?a=d.firstChild:"after"===b&&(a=a.nextSibling),d.insertBefore(c,a)}return c}function G(a,b,c){return F(b,c,a)}function H(a,b){return b.getAttribute(a)}function I(a,b,c){return c.setAttribute(a,b)}function J(a){return v(a).map(function(a){return a.remove(),a})}function K(){}function L(a,b,c){var d="qix-"+a,e=3===arguments.length?c:500;W.push({name:a,hooker:b,priority:e,attr_name:d,get_deps:b.get_deps||function(){return[]}}),W.sort(function(a,b){return a.priority<b.priority})}function M(a,b,c,d){function e(b){var e="object"==typeof b?b:d;h=a.spawn(e,c,"before")}function f(){i=!0,c.removeEventListener("destroy",f),h.$destroy(),h=null}function g(a){return i?void 0:(a&&!h?e(a):!a&&h&&(h.$destroy(),h=null),g.cmp=h,h)}var h=null,i=!1;return c.addEventListener("destroy",f),g}function N(a,b,c,d){function e(){f(),i=!0,h.map(r.bind(null,"$content")).forEach(J),h=[],c.removeEventListener("destroy",e)}function f(){h.forEach(function(a){a.$destroy()})}function g(b){return f(),h=b.map(function(b,e){var f="object"==typeof b?b:d,g=Object.create(f);return g.$index=e,a.spawn(g,c,"before")})}var h=[],i=!1;return c.addEventListener("destroy",e),g}function O(a,b,c,d){var e=w(!0,a.master),f=R(e,b);return C(e,c,d),f.inject(),f.component}function P(a,b,c){a.$controlled_nodes.forEach(function(a){var d=new CustomEvent(b,{detail:c,bubbles:!1});a.dispatchEvent(d)})}function Q(a){a.$message("destroy"),J(a.$content.concat(a.$controlled_nodes)),a.$content=[],a.$controlled_nodes=[]}function R(a,b){var c=[],d={$controlled_nodes:[]};return d.$message=P.bind(null,d),d.$destroy=Q.bind(null,d),d.$content=v(a.childNodes),V(a).forEach(function(a){var e=l(a),f=document.createComment("qix-hooker "+e.scope_name+":"+e.hooker_def.name);E(a,f);var g=d[e.scope_name]=e.hook(f,b);c=c.concat(e.injectors.map(function(a){return a.bind(null,g)})),d.$controlled_nodes.unshift(f)}),T(a).forEach(function(a){g(a).forEach(function(b){var e=d[b.scope_name]=b.control(a);d["$"+b.scope_name]=a,c=c.concat(b.injectors.map(function(a){return a.bind(null,e)})),d.$controlled_nodes.unshift(a)})}),{inject:function(){c.forEach(function(a){a(b,d)})},component:d}}var S=[],T=y.bind(null,"[qix-ctl]"),U=[],V=A.bind(null,"qix-hooked"),W=[];L("if",M,1e3),L("map",N,900),define("qix",function(){var a={load:function(a,b,c){b(["qix-seed!"+a],c)}};return a}),define("qix-defhook",function(){function a(a,b,c){var d=a.split(":"),e=d[0],f=d[1].split("#"),g=f[0],h=Number(f[1]);b([e],function(a){L(g,a,h),c(a)})}return{load:a}}),define("qix-seed",function(){function a(a){var b=document.createElement("div");return b.innerHTML=a,b}function b(a,b){return b.startsWith(".")?a+b:b}function c(c,d,e){var f=c.substring(0,c.lastIndexOf("/")+1),g=b.bind(null,f);d(["qix-text!"+c],function(b){var c=a(b),d=function(a,b,c){if(Array.prototype.isPrototypeOf(a))return a=a.map(g),require(a,b,c);var d=g(a);return require(d)};m(c,d,e)})}return{load:c}}),define("qix-text",function(){function a(a,b,c){var d=b.toUrl(a);X(d,c)}return{load:a}});var X=function(){function a(a,c){var d=b();if(!d)throw new Error("NO XHR!");d.responseType="text",d.open("GET",a,!0),d.onreadystatechange=function(){if(4==d.readyState){if(200!=d.status&&304!=d.status)throw new Error("get_remote_text HTTP error for ["+a+"] : "+d.status);c(d.responseText)}},4!=d.readyState&&d.send()}function b(){for(var a=!1,b=0;b<c.length;b++){try{a=c[b]()}catch(d){continue}break}return a}var c=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}];return a}()}();